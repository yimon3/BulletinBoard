@model PagedList.IPagedList<BulletinBoardSampleFrame.ViewModel.Post.PostViewModel>
@using PagedList.Mvc;

@{ ViewBag.Title = "View";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (Session["Name"] != null)
{
    <p style="color:darkred">Welcome @Session["Name"].ToString()!</p>
}
<h3>Post List</h3>
<br />
@section usage{
    <link href="~/Resource/lib/css/table.css" rel="stylesheet" />
}
@section script
{
    <script src="~/Resource/js/JavaScript.js"></script>
}
@using (Html.BeginForm("Search", "Post", FormMethod.Post))
{
    <div class="col-lg-12">
        <input type="text" name="searchString" />
        <input type="submit" class="btn btn-info" value="Search" />
        <input type="button" class="btn btn-danger" value="Add" onclick="location.href='@Url.Action("CreatePost", "Post")'" />
        <input type="button" class="btn btn-success" value="Upload" onclick="location.href='@Url.Action("UploadCSV", "Post")'" />
        <input type="button" class="btn btn-warning" value="Download" onclick="location.href='@Url.Action("DownloadCSV", "Post", FormMethod.Post)'" />
    </div>
    <br />
    <br />
    <br />
    <table class="table table-bordered">
        <tr>
            <th>
                Post Title
            </th>
            <th>
                Post Description
            </th>
            <th>
                Posted User
            </th>
            <th>
                Posted Date
            </th>
            <th></th>
        </tr>
        @foreach (var item in Model)
        {

            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Title)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreatedUser)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Created_at)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { @id = item.Id }, new { @class = "btn btn-success" }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.Id }, new { onclick = "return confirm('Are sure wants to delete?');" })
                </td>
            </tr>
        }
    </table>
    <div id="container" style="margin-left: 20px">
        <p></p>
        <p></p>
        <div class="pagination" style="margin-left: 400px">
            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
            of @Model.PageCount
            @if ((string)Session["Type"] == "User")
            {@Html.PagedListPager(Model, page => Url.Action("PostList", new { page }))}
        else
        { @Html.PagedListPager(Model, page => Url.Action("PostView", new { page }))}

        </div>
    </div>
}
